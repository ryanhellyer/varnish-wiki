

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<title>Varnish Web Developer’s FAQ &mdash; Varnish Wiki  documentation</title>
	

	
	

	

	<script type="text/javascript">
		var DOCUMENTATION_OPTIONS = {
			URL_ROOT:       './',
			VERSION:        '1.0',
			COLLAPSE_INDEX: false,
			FILE_SUFFIX:    '.html',
			HAS_SOURCE:     true
		};
	</script>
	<script type="text/javascript" src="https://www.varnish-software.com//wiki/_static/jquery.js"></script>
	<script type="text/javascript" src="https://www.varnish-software.com//wiki/_static/underscore.js"></script>
	<script type="text/javascript" src="https://www.varnish-software.com//wiki/_static/doctools.js"></script>
	<script type="text/javascript" src="https://www.varnish-software.com//wiki/_static/searchtools.js"></script>
	<script type="text/javascript" src="https://www.varnish-software.com//wiki/_static/js/jquery-1.11.0.min.js"></script>
	<script type="text/javascript" src="https://www.varnish-software.com//wiki/_static/js/jquery-fix.js"></script>
	<link rel="search" title="Search" href="#" />
	<script type="text/javascript">jQuery(function() { Search.loadIndex("searchindex.js"); });</script>
	<script type="text/javascript" id="searchindexloader"></script>
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-15491050-1']);
		_gaq.push(['_trackPageview']);
		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>

	<link rel="stylesheet" href="../_static/default.css"/>
	<link rel="stylesheet" href="../_static/custom.css"/>

	<script src="../_static/js/popper.min.js"></script>
	<script src="../_static/js/bootstrap.min.js"></script>
	<link href="../_static/css/bootstrap.min.css" rel="stylesheet">
	<link href="../_static/css/font-awesome.min.css" rel="stylesheet">
	<link href="../_static/css/custom.css" rel="stylesheet">
	<link href="../_static/css/prism.css" rel="stylesheet">
	<link rel="icon" type="image/png" href="../_static/images/favicon.png">

	
	<script src="../_static/js/modernizr.min.js"></script></head>
<body>

<div class="container">
	<a href="https://www.varnish-software.com/">
		<img class="logo" src="../_static/images/varnish_software_logo.png" />
	</a>

	<hr />
</div>
<div class="container">

	

	<div id="wiki-sidebar">
		<div class="sidebar-block">
			<div class="sidebar-wrapper">
				<h3>Contents</h3>
			<div class="sidebar-localtoc">
				<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../start/index.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Varnish Web Developer&#8217;s FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#more-reading">More Reading ...</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../content/tutorials/varnish/index.html">How to Varnish</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content/tutorials/wordpress/index.html">WordPress with Varnish</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content/tutorials/magento2/index.html">Magento2 with Varnish</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content/tutorials/drupal/index.html">Drupal with Varnish</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content/tutorials/aem.html">Adobe Experience Manager and Varnish</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content/tutorials/expressionEngine.html">ExpressionEngine and Varnish</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content/tutorials/sitecoreCMS.html">Sitecore CMS and Varnish</a></li>
</ul>

			</div>
		</div>
	</div>

	
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="../search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
	
  <div class="sidebar-block">
    <div class="sidebar-wrapper">
      <h4>&nbsp;&nbsp;Contribute</h4>
      <ul class="this-page-menu">
        <li><a href="../_sources/faq/index.txt"
               rel="nofollow">Show Source</a></li>
        <li><a href="https://github.com/huayra/wiki_varnish/blob/master/source/faq/index.rst"
               rel="nofollow">Show on GitHub</a></li>
        <li><a href="https://github.com/huayra/wiki_varnish/edit/master/source/faq/index.rst"
               rel="nofollow">Edit on GitHub</a></li>
      </ul>
    </div>
  </div>
</div>


<div id="wiki-content">
	
  <div class="section" id="varnish-web-developer-s-faq">
<span id="faq"></span><h1>Varnish Web Developer&#8217;s FAQ<a class="headerlink" href="#varnish-web-developer-s-faq" title="Permalink to this headline">¶</a></h1>
<p><strong>What is Varnish?</strong></p>
<p>Varnish Cache is a web application accelerator also known as a caching
HTTP reverse proxy. You install it in front of any HTTP server and
configure it to cache the contents. Varnish Cache is really,really fast.
It typically speeds up delivery with a factor of 300 - 1000x, depending
on your architecture. A high level overview of what Varnish does can be
seen in <a class="reference external" href="https://www.youtube.com/watch?v=fGD14ChpcL4">this video</a>.</p>
<p>You can read a general overview of <a class="reference external" href="https://www.varnish-cache.org/docs/4.1/users-guide/intro.html#users-intro">The Big Varnish Picture</a> in the
official Varnish documentation! :)</p>
<p><strong>What is Varnish&#8217;s superpower?</strong></p>
<p>Highly Flexible !!</p>
<p>One of the key features of Varnish Cache, in addition to its
performance, is the flexibility of its configuration language, VCL.
VCL enables you to write policies on how incoming requests should be
handled. In such a policy you can decide what content you want to serve,
from where you want to fetch said content and whether and how the request
or response should be altered. You can <a class="reference external" href="https://www.varnish-cache.org/vmods">extend Varnish&#8217;s VCL with modules
(VMODs)</a>. You can read more
about this in the official documentation <a class="reference external" href="https://www.varnish-cache.org/docs/trunk/tutorial/">tutorial at varnish-cache.org</a>.</p>
<p>Varnish is designed with security, performance and flexibility in mind.
For an in-depth look at this you can read <a class="reference external" href="http://book.varnish-software.com/4.0/chapters/Design_Principles.html">The Design Principle of Varnish</a>
chapter in the Varnish Book.</p>
<p><strong>Should I use Varnish for my site?</strong></p>
<p>If you are wondering why you are on our website reading about our product,
you are in the right section. We&#8217;ll help you answer the why Varnish question.</p>
<p>Most probably you need to handle a lot of traffic. For that caching is one
of the best ways to maximize the output of your website!</p>
<p>The main idea behind making your website fly is to reduce the workload of
your web infrastructure: webserver, database, application; and to optimally
use your network capacity. Basically: Your frontend shouldn&#8217;t have to make
requests to the backend too often for the same dynamic content every time
a client requests it.</p>
<p>To save your resources placing a reverse-proxy, caching software such as
Varnish Cache right in front of your web application can accelerate the
responses to almost all your HTTP requests and thus reduce server workload.</p>
<p>So congratulations! You are making a great choice because Varnish does
exactly that. And more! Varnish works by managing client requests BEFORE they
make it to your web application server. Varnish not only reduces your
webserver load but by being fast it offers DDoS protection to your webservers,
making them more resilient and secure.</p>
<p>There is a good article describing <a class="reference external" href="http://en.wikipedia.org/wiki/Varnish_(software)">Varnish Cache on
Wikipedia</a>.</p>
<p id="varnish-memcache"><strong>What is the relation between Varnish and Memcache?</strong></p>
<p>Memcache is a Key Value store, more or less a rather simple database. It doesn&#8217;t
persist data and only stores it in memory. It also doesn&#8217;t really care if it
throws data out. The natural use for Memcache is to cache things internally
in your application or between your application and your database. Memcache
uses its own specific protocol to store and fetch content.</p>
<p>Varnish on the other hand stores rendered pages. It talks HTTP so it will
typically talk directly to a HTTP client and deliver pages from it&#8217;s cache
whenever said page is stored in the cache, what is commonly called a a cache hit.
When an object, any kind of content i.e. an image or a page, is not stored in the
cache, then we have what is commonly known as a a cache miss, in which case Varnish
will go and fetch the content from the web server, store it and deliver a copy to
the user.</p>
<p>These are two pretty different pieces of software. The end goal of both pieces
of software is the same, though and most sites would likely use both technologies
in order to speed up delivery. They will deploy Varnish to speed up delivery of its
cache hits, and when you have a cache miss the application server might have access
to some data in Memcache, which will be available to the application faster than what the
database is capable of delivering.</p>
<p>The performance characteristics are pretty different. Varnish will start
delivering a cache hit in a matter of microseconds whereas a PHP page that gets
rendered content from Memcache will likely spend somewhere around 15-30 milliseconds
doing so. The reason Varnish can do it faster is that Varnish has it&#8217;s content in
local memory whereas the PHP script needs to get on the network and fetch the
content over a TCP connection. In addition, you&#8217;ll have the overhead costs of the
interpreter. It&#8217;s not only that Varnish is better, it&#8217;s just that Varnish has a much
easier job to do and it is faster because of it.</p>
<p>There are no good reason not to use both.</p>
<p><strong>What is the difference in caching architecture between Varnish and Squid?</strong></p>
<p>The most fundamental difference between Squid and Varnish is that Squid is a
forward proxy that can be a configured as a reverse proxy whereas Varnish is built
from the ground up to be a reverse proxy.</p>
<p>So, in principle Varnish is better suited than Squid to do reverse proxy HTTP.
However, Squid is a very mature product and has had time to accumulate a lot of
features that still are not available in Varnish. Both projects are used by huge
websites and both of them can do almost anything.</p>
<p>The main advantages of Squid over Varnish, as I see them, are:</p>
<ul class="simple">
<li>Built in TLS/SSL support. Varnish needs hitch, nginx or stunnel to do TLS.</li>
<li>Better support for Range and streaming delivery of objects.</li>
<li>Support for antivirus-plugins</li>
</ul>
<p>On the other hand, Varnish has:</p>
<ul class="simple">
<li>VCL, an absolutely amazing configuration system. VCL gives unmatched flexibility to run policies. Want to rewrite URLs coming from a certain user-agent requesting a specific URL coming from a specific network? Easy. With Squid, that configuration will be quite complex (if at all possible).</li>
<li>Better performance and scalability. Squid is a single process running on only one CPU core, whereas Varnish is threaded. A single Varnish server is reported to serving 60K req/sec on real life traffic. Squid has never been reported to push those kind of numbers.</li>
<li>Better and more flexible invalidation support. With Varnish you can invalidate content from cache based on more or less everything. Literally.</li>
<li>VMODs, Varnish modules which can easily extend Varnish&#8217;s VCL capabilities and add new features. Such modules can be written in a matter of hours. Which makes VCL very powerful.</li>
</ul>
<p><strong>What is the difference between Caching and Memoization?</strong></p>
<p>Memoization is a way of caching results of a function to avoid recalculating the
the next time the same function is called. The technique is that the function is executed, the result gets added to an
object holding the calculated results. When the function is called again, the
result object is checked to see if it contains the result.</p>
<p>Caching on the other hand, is about storing reusable web traffic responses in
order to make subsequent requests faster.</p>
<div class="section" id="more-reading">
<h2>More Reading ...<a class="headerlink" href="#more-reading" title="Permalink to this headline">¶</a></h2>
<p>In this wiki you can find other resources. Read on about <a class="reference internal" href="../start/website_arch.html#website-arch"><span class="std std-ref">Understand your Website</span></a></p>
<p>External resources that might be useful:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.ismyvarnishworking.com">Is My Varnish Working?</a></li>
<li>This varnish checking website is hosted by <a class="reference external" href="https://dev.acquia.com/blog/explaining-varnish-beginners">Acquia</a></li>
</ul>
<p>If you want to help fix our bugs or want to know about bugs in the project check:</p>
<ul class="simple">
<li><a class="reference external" href="https://scan.coverity.com/projects/varnish">https://scan.coverity.com/projects/varnish</a></li>
</ul>
</div>
</div>


</div>

<br/>

<div class="container">
	<div class="footer">
		<div class="text-muted text-center">
			<small>Copyright 2018, Varnish Software AB</small>
		</div>
		<div class="text-muted text-center">
			<small>®Varnish Software, Norrtullsgatan 6, 113 29 Stockholm, Organization nr. 556805-6203</small>
		</div>
	</div>
</div>

<script async src="https:////radar.cedexis.com/1/20516/radar.js"></script>

</body>
</html>